<?php  return array (
  'resourceClass' => 'modDocument',
  'resource' => 
  array (
    'id' => 2,
    'type' => 'document',
    'contentType' => 'text/html',
    'pagetitle' => 'The Surf Shampoo and Cream Rinse',
    'longtitle' => 'The Surf Shampoo and Cream Rinse',
    'description' => 'The Surf Shampoo and Cream Rinse (old school for conditioner) have arrived!!! We are all so super excited about these new products. 
PS... What about that wicked cool display?!? 
',
    'alias' => 'the-surf-shampoo-and-cream-rinse',
    'link_attributes' => '',
    'published' => 1,
    'pub_date' => 0,
    'unpub_date' => 0,
    'parent' => 5,
    'isfolder' => 0,
    'introtext' => 'The Surf Shampoo and Cream Rinse (old school for conditioner) have arrived!!! We are all so super excited about these new products. 
PS... What about that wicked cool display?!?
',
    'content' => '<p> </p>
<p>The Surf Shampoo and Cream Rinse (old school for conditioner) have arrived!!! We are all so super excited about these new products. <br />PS... What about that wicked cool display?!?</p>
<p><span style="color: #333333; font-family: \'lucida grande\', tahoma, verdana, arial, sans-serif; font-size: 12.727272033691406px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 17.99715805053711px; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; display: inline !important; float: none;"><img title="Studio Fovero Surf Spray" src="assets/images/blog-images/studio-surf.jpg" alt="Studio Fovero Surf Spray" width="480" height="642" /></span></p>',
    'richtext' => 1,
    'template' => 2,
    'menuindex' => 1,
    'searchable' => 1,
    'cacheable' => 1,
    'createdby' => 1,
    'createdon' => 1363662561,
    'editedby' => 1,
    'editedon' => 1375238984,
    'deleted' => 0,
    'deletedon' => 0,
    'deletedby' => 0,
    'publishedon' => 1363663200,
    'publishedby' => 1,
    'menutitle' => 'The Surf Shampoo and Cream Rinse',
    'donthit' => 0,
    'privateweb' => 0,
    'privatemgr' => 0,
    'content_dispo' => 0,
    'hidemenu' => 0,
    'class_key' => 'modDocument',
    'context_key' => 'web',
    'content_type' => 1,
    'uri' => 'blog/the-surf-shampoo-and-cream-rinse.html',
    'uri_override' => 0,
    'hide_children_in_tree' => 0,
    'show_in_tree' => 1,
    'properties' => NULL,
    'tags' => 
    array (
      0 => 'tags',
      1 => 'Beauty, Events',
      2 => 'default',
      3 => NULL,
      4 => 'text',
    ),
    'marketingimages' => 
    array (
      0 => 'marketingimages',
      1 => 'assets/marketing_images/marketingsidebar.png',
      2 => 'image',
      3 => NULL,
      4 => 'image',
    ),
    '_content' => '<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
		<meta name="description" content="The Surf Shampoo and Cream Rinse (old school for conditioner) have arrived!!! We are all so super excited about these new products. 
PS... What about that wicked cool display?!? 
">
		<meta name="keywords" content="The Surf Shampoo and Cream Rinse (old school for conditioner) have arrived!!! We are all so super excited about these new products. 
PS... What about that wicked cool display?!?
">
		<meta name="Designer" content="David Wetherell ~ LimeFlies Development">
		<meta name="copyright" content="Studio Fovero Salon and Spa">
		<link rel="icon" type="image/x-icon" href="../assets/images/favicon.ico" />
		<link rel="stylesheet" type="text/css" href="../assets/css/reset.css" media="screen" />
		<link rel="stylesheet" type="text/css" href="../assets/css/style.css" media="screen" />
        <link href="../assets/css/21-screen.css" media="screen and (min-width: 1800px) and (max-width: 2000px)" rel="stylesheet">
<!--[if gt IE 7]>
	<link rel="stylesheet" type="text/css" href="../assets/css/ie8andup.css" />
<![endif]-->

<!--[if lte IE 8]>
	<link rel="stylesheet" href="../assets/css/ie.css" type="text/css" />
<![endif]-->

  <script> 
if (/*@cc_on!@*/false) { 
    var headHTML = document.getElementsByTagName(\'head\')[0].innerHTML; 
headHTML    += \'<link type="text/css" rel="stylesheet" href="../assets/css/ie8andup.css">\'; 
document.getElementsByTagName(\'head\')[0].innerHTML = headHTML; 
} 
</script>

<!--[if !IE]>
	<link type="text/css" rel="stylesheet" media="only screen and (max-device-width: 480px)" href="../assets/css/iPhone.css" />
	<link type="text/css" rel="stylesheet" media="only screen and (min-device-width: 768px) and (max-device-width: 1024px)" href="../assets/css/iPad.css" />
<![endif]-->
<!--[if lt IE 8]>
<script type="text/javascript">
    window.location = "http://www.google.com";
</script>
<![endif]-->
	
            <base href="http://www.studiofovero.com/" />
		<title>Studio Fovero Salon and Spa - The Surf Shampoo and Cream Rinse</title>
                      </head>
    

<body data-spy="scroll">


<div id="wrapper">

<div id="navSection"><div id="navWrapper">				
					<ul id="mainNav" class="nav">

						<li><a href="#home" id="linkHome">Home</a></li>
						<li><a href="#slideone" id="linkPots">About</a></li>
						<li><a href="#slidetwo" id="linkBenefits">Salon Services</a></li>
						<li><a href="#slidesix" id="linkBenefits">Spa Services</a></li>
                                                <li id="studioLogo"><img src="assets/images/studio_logo.png" id="logo" /></li>
						<li><a href="#slidefour" id="linkComparison">Styling Products</a></li>
						<li><a href="#slidethree" id="linkToppings">Gallery </a></li>
						<li><a href="#top10" id="linkPromotions">Fovero Staff</a></li>
						<li><a href="#slidefive" id="linkPromotions">Promotions</a></li>
					
					</ul>
		 </div></div>




<div id="home">  
<div id="homeWrapper">
<div id="rightnav">

<img src="assets/marketing_images/marketingsidebar.png" alt="" />



</div>
<div id="content" class="blog-post">

  
  <p class="post-info">

</br>
  <h1 class="title"><a href="blog/the-surf-shampoo-and-cream-rinse.html">The Surf Shampoo and Cream Rinse</a></h1>
 <a href="blog/">Back to Blog</a> | Posted on Mar 19, 2013 | 
  Tags: [[!tolinks? &items=`Beauty, Events` &tagKey=`tag` &target=`2`]] | 
  <a href="blog/the-surf-shampoo-and-cream-rinse.html#comments" class="comments">
    Comments ([[!QuipCount? &thread=`blog-post-2`]])
  </a>
  </p>
 
  <div class="entry">

    <p> </p>
<p>The Surf Shampoo and Cream Rinse (old school for conditioner) have arrived!!! We are all so super excited about these new products. <br />PS... What about that wicked cool display?!?</p>
<p><span style="color: #333333; font-family: \'lucida grande\', tahoma, verdana, arial, sans-serif; font-size: 12.727272033691406px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 17.99715805053711px; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; display: inline !important; float: none;"><img title="Studio Fovero Surf Spray" src="assets/images/blog-images/studio-surf.jpg" alt="Studio Fovero Surf Spray" width="480" height="642" /></span></p>
   </div>
 

  <hr />
  <div class="post-comments" id="comments">[[!Quip?
      &thread=`blog-post-2`
      &replyResourceId=`123`
      &closeAfter=`0`
    ]]
    <br /><br />
    [[!QuipReply?
       &thread=`blog-post-2`
       &notifyEmails=`davidwetherell@limeflies.com`
      
       &moderate=`1`
       &moderatorGroup=`Moderators`
       
       &closeAfter=`0`
    ]]

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push([\'_setAccount\', \'UA-39958452-1\']);
  _gaq.push([\'_trackPageview\']);

  (function() {
    var ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;
    ga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';
    var s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


  </div>
 </div>
</div>',
    '_isForward' => false,
  ),
  'contentType' => 
  array (
    'id' => 1,
    'name' => 'HTML',
    'description' => 'HTML content',
    'mime_type' => 'text/html',
    'file_extensions' => '.html',
    'headers' => NULL,
    'binary' => 0,
  ),
  'policyCache' => 
  array (
  ),
  'elementCache' => 
  array (
    '[[*description]]' => 'The Surf Shampoo and Cream Rinse (old school for conditioner) have arrived!!! We are all so super excited about these new products. 
PS... What about that wicked cool display?!? 
',
    '[[*introtext]]' => 'The Surf Shampoo and Cream Rinse (old school for conditioner) have arrived!!! We are all so super excited about these new products. 
PS... What about that wicked cool display?!?
',
    '[[*pagetitle]]' => 'The Surf Shampoo and Cream Rinse',
    '[[$blog-header]]' => '<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
		<meta name="description" content="The Surf Shampoo and Cream Rinse (old school for conditioner) have arrived!!! We are all so super excited about these new products. 
PS... What about that wicked cool display?!? 
">
		<meta name="keywords" content="The Surf Shampoo and Cream Rinse (old school for conditioner) have arrived!!! We are all so super excited about these new products. 
PS... What about that wicked cool display?!?
">
		<meta name="Designer" content="David Wetherell ~ LimeFlies Development">
		<meta name="copyright" content="Studio Fovero Salon and Spa">
		<link rel="icon" type="image/x-icon" href="../assets/images/favicon.ico" />
		<link rel="stylesheet" type="text/css" href="../assets/css/reset.css" media="screen" />
		<link rel="stylesheet" type="text/css" href="../assets/css/style.css" media="screen" />
        <link href="../assets/css/21-screen.css" media="screen and (min-width: 1800px) and (max-width: 2000px)" rel="stylesheet">
<!--[if gt IE 7]>
	<link rel="stylesheet" type="text/css" href="../assets/css/ie8andup.css" />
<![endif]-->

<!--[if lte IE 8]>
	<link rel="stylesheet" href="../assets/css/ie.css" type="text/css" />
<![endif]-->

  <script> 
if (/*@cc_on!@*/false) { 
    var headHTML = document.getElementsByTagName(\'head\')[0].innerHTML; 
headHTML    += \'<link type="text/css" rel="stylesheet" href="../assets/css/ie8andup.css">\'; 
document.getElementsByTagName(\'head\')[0].innerHTML = headHTML; 
} 
</script>

<!--[if !IE]>
	<link type="text/css" rel="stylesheet" media="only screen and (max-device-width: 480px)" href="../assets/css/iPhone.css" />
	<link type="text/css" rel="stylesheet" media="only screen and (min-device-width: 768px) and (max-device-width: 1024px)" href="../assets/css/iPad.css" />
<![endif]-->
<!--[if lt IE 8]>
<script type="text/javascript">
    window.location = "http://www.google.com";
</script>
<![endif]-->
	
            <base href="http://www.studiofovero.com/" />
		<title>Studio Fovero Salon and Spa - The Surf Shampoo and Cream Rinse</title>
                      </head>
    ',
    '[[$nav]]' => '				
					<ul id="mainNav" class="nav">

						<li><a href="#home" id="linkHome">Home</a></li>
						<li><a href="#slideone" id="linkPots">About</a></li>
						<li><a href="#slidetwo" id="linkBenefits">Salon Services</a></li>
						<li><a href="#slidesix" id="linkBenefits">Spa Services</a></li>
                                                <li id="studioLogo"><img src="assets/images/studio_logo.png" id="logo" /></li>
						<li><a href="#slidefour" id="linkComparison">Styling Products</a></li>
						<li><a href="#slidethree" id="linkToppings">Gallery </a></li>
						<li><a href="#top10" id="linkPromotions">Fovero Staff</a></li>
						<li><a href="#slidefive" id="linkPromotions">Promotions</a></li>
					
					</ul>
		',
    '[[*marketingimages]]' => '<img src="assets/marketing_images/marketingsidebar.png" alt="" />',
    '[[*id]]' => 2,
    '[[~2]]' => 'blog/the-surf-shampoo-and-cream-rinse.html',
    '[[*parent]]' => 5,
    '[[~5]]' => 'blog/',
    '[[*publishedon:strtotime:date=`%b %d, %Y`]]' => 'Mar 19, 2013',
    '[[*tags]]' => 'Beauty, Events',
    '[[*tags:notempty=`[[!tolinks? &items=`Beauty, Events` &tagKey=`tag` &target=`2`]]`]]' => '[[!tolinks? &items=`Beauty, Events` &tagKey=`tag` &target=`2`]]',
    '[[%quip.comments]]' => 'Comments',
    '[[%quip.name? &namespace=`quip` &topic=`default`]]' => 'Name',
    '[[%quip.email]]' => 'Email',
    '[[%quip.website]]' => 'Website',
    '[[%quip.notify_me]]' => 'Notify of New Replies',
    '[[%quip.allowed_tags? &tags=`&lt;b&gt;&lt;i&gt;&lt;br&gt;`]]' => 'Allowed tags: &lt;b&gt;&lt;i&gt;&lt;br&gt;',
    '[[%quip.comment_add_new]]' => 'Add a new comment:',
    '[[%quip.preview]]' => 'Preview',
    '[[%quip.post]]' => 'Post',
  ),
  'sourceCache' => 
  array (
    'modChunk' => 
    array (
      'blog-header' => 
      array (
        'fields' => 
        array (
          'id' => 34,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'blog-header',
          'description' => 'Studio Fovero header',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
		<meta name="description" content="[[*description]]">
		<meta name="keywords" content="[[*introtext]]">
		<meta name="Designer" content="David Wetherell ~ LimeFlies Development">
		<meta name="copyright" content="[[++site_name]]">
		<link rel="icon" type="image/x-icon" href="../assets/images/favicon.ico" />
		<link rel="stylesheet" type="text/css" href="../assets/css/reset.css" media="screen" />
		<link rel="stylesheet" type="text/css" href="../assets/css/style.css" media="screen" />
        <link href="../assets/css/21-screen.css" media="screen and (min-width: 1800px) and (max-width: 2000px)" rel="stylesheet">
<!--[if gt IE 7]>
	<link rel="stylesheet" type="text/css" href="../assets/css/ie8andup.css" />
<![endif]-->

<!--[if lte IE 8]>
	<link rel="stylesheet" href="../assets/css/ie.css" type="text/css" />
<![endif]-->

  <script> 
if (/*@cc_on!@*/false) { 
    var headHTML = document.getElementsByTagName(\'head\')[0].innerHTML; 
headHTML    += \'<link type="text/css" rel="stylesheet" href="../assets/css/ie8andup.css">\'; 
document.getElementsByTagName(\'head\')[0].innerHTML = headHTML; 
} 
</script>

<!--[if !IE]>
	<link type="text/css" rel="stylesheet" media="only screen and (max-device-width: 480px)" href="../assets/css/iPhone.css" />
	<link type="text/css" rel="stylesheet" media="only screen and (min-device-width: 768px) and (max-device-width: 1024px)" href="../assets/css/iPad.css" />
<![endif]-->
<!--[if lt IE 8]>
<script type="text/javascript">
    window.location = "http://www.google.com";
</script>
<![endif]-->
	
            <base href="[[++site_url]]" />
		<title>[[++site_name]] - [[*pagetitle]]</title>
                      </head>
    ',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
		<meta name="description" content="[[*description]]">
		<meta name="keywords" content="[[*introtext]]">
		<meta name="Designer" content="David Wetherell ~ LimeFlies Development">
		<meta name="copyright" content="[[++site_name]]">
		<link rel="icon" type="image/x-icon" href="../assets/images/favicon.ico" />
		<link rel="stylesheet" type="text/css" href="../assets/css/reset.css" media="screen" />
		<link rel="stylesheet" type="text/css" href="../assets/css/style.css" media="screen" />
        <link href="../assets/css/21-screen.css" media="screen and (min-width: 1800px) and (max-width: 2000px)" rel="stylesheet">
<!--[if gt IE 7]>
	<link rel="stylesheet" type="text/css" href="../assets/css/ie8andup.css" />
<![endif]-->

<!--[if lte IE 8]>
	<link rel="stylesheet" href="../assets/css/ie.css" type="text/css" />
<![endif]-->

  <script> 
if (/*@cc_on!@*/false) { 
    var headHTML = document.getElementsByTagName(\'head\')[0].innerHTML; 
headHTML    += \'<link type="text/css" rel="stylesheet" href="../assets/css/ie8andup.css">\'; 
document.getElementsByTagName(\'head\')[0].innerHTML = headHTML; 
} 
</script>

<!--[if !IE]>
	<link type="text/css" rel="stylesheet" media="only screen and (max-device-width: 480px)" href="../assets/css/iPhone.css" />
	<link type="text/css" rel="stylesheet" media="only screen and (min-device-width: 768px) and (max-device-width: 1024px)" href="../assets/css/iPad.css" />
<![endif]-->
<!--[if lt IE 8]>
<script type="text/javascript">
    window.location = "http://www.google.com";
</script>
<![endif]-->
	
            <base href="[[++site_url]]" />
		<title>[[++site_name]] - [[*pagetitle]]</title>
                      </head>
    ',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'nav' => 
      array (
        'fields' => 
        array (
          'id' => 4,
          'source' => 1,
          'property_preprocess' => false,
          'name' => 'nav',
          'description' => 'Studio Fovero Navigation',
          'editor_type' => 0,
          'category' => 0,
          'cache_type' => 0,
          'snippet' => '				
					<ul id="mainNav" class="nav">

						<li><a href="#home" id="linkHome">Home</a></li>
						<li><a href="#slideone" id="linkPots">About</a></li>
						<li><a href="#slidetwo" id="linkBenefits">Salon Services</a></li>
						<li><a href="#slidesix" id="linkBenefits">Spa Services</a></li>
                                                <li id="studioLogo"><img src="assets/images/studio_logo.png" id="logo" /></li>
						<li><a href="#slidefour" id="linkComparison">Styling Products</a></li>
						<li><a href="#slidethree" id="linkToppings">Gallery </a></li>
						<li><a href="#top10" id="linkPromotions">Fovero Staff</a></li>
						<li><a href="#slidefive" id="linkPromotions">Promotions</a></li>
					
					</ul>
		',
          'locked' => false,
          'properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '				
					<ul id="mainNav" class="nav">

						<li><a href="#home" id="linkHome">Home</a></li>
						<li><a href="#slideone" id="linkPots">About</a></li>
						<li><a href="#slidetwo" id="linkBenefits">Salon Services</a></li>
						<li><a href="#slidesix" id="linkBenefits">Spa Services</a></li>
                                                <li id="studioLogo"><img src="assets/images/studio_logo.png" id="logo" /></li>
						<li><a href="#slidefour" id="linkComparison">Styling Products</a></li>
						<li><a href="#slidethree" id="linkToppings">Gallery </a></li>
						<li><a href="#top10" id="linkPromotions">Fovero Staff</a></li>
						<li><a href="#slidefive" id="linkPromotions">Promotions</a></li>
					
					</ul>
		',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
    ),
    'modSnippet' => 
    array (
      'tolinks' => 
      array (
        'fields' => 
        array (
          'id' => 31,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'tolinks',
          'description' => 'Builds links from tags.',
          'editor_type' => 0,
          'category' => 8,
          'cache_type' => 0,
          'snippet' => '/**
 * tagLister
 *
 * Copyright 2010 by Shaun McCormick <shaun@modxcms.com>
 *
 * This file is part of tagLister, a simple tag listing snippet for MODx
 * Revolution.
 *
 * tagLister is free software; you can redistribute it and/or modify it under
 * the terms of the GNU General Public License as published by the Free Software
 * Foundation; either version 2 of the License, or (at your option) any later
 * version.
 *
 * tagLister is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU General Public License for more
 * details.
 *
 * You should have received a copy of the GNU General Public License along with
 * tagLister; if not, write to the Free Software Foundation, Inc., 59 Temple
 * Place, Suite 330, Boston, MA 02111-1307 USA
 *
 * @package taglister
 */
/**
 * tolinks snippet. Creates links out of tags.
 *
 * @var modX $modx
 * @var tagLister $tagLister
 * @var array $scriptProperties
 * 
 * @package taglister
 */
$tagLister = $modx->getService(\'taglister\',\'TagLister\',$modx->getOption(\'taglister.core_path\',null,$modx->getOption(\'core_path\').\'components/taglister/\').\'model/taglister/\',$scriptProperties);
if (!($tagLister instanceof TagLister)) return \'\';

/* setup default properties */
$inputDelim = $modx->getOption(\'inputDelim\',$scriptProperties,\',\');
$outputDelim = $modx->getOption(\'outputDelim\',$scriptProperties,\', \');
$tagRequestParam = $modx->getOption(\'tagRequestParam\',$scriptProperties,\'tag\');
$tagKeyVar = $modx->getOption(\'tagKeyVar\',$scriptProperties,\'key\');
$tagKey = $modx->getOption(\'tagKey\',$scriptProperties,\'tags\');
$target = !empty($scriptProperties[\'target\']) ? $scriptProperties[\'target\'] : $modx->resource->get(\'id\');
$tpl = $modx->getOption(\'tpl\',$scriptProperties,\'link\');
$cls = $modx->getOption(\'cls\',$scriptProperties,\'tl-tag\');
$useTagsFurl = $modx->getOption(\'useTagsFurl\',$scriptProperties,false);

/* get items */
$items = $modx->getOption(\'items\',$scriptProperties,\'\');
if (empty($items)) return \'\';
$items = explode($inputDelim,$items);

/* if extra params, set em */
$extraParams = $modx->getOption(\'extraParams\',$scriptProperties,\'\');
if (!empty($extraParams)) {
    $extraParams = trim(trim(trim($extraParams,\'?\'),\'&\'),\'&amp;\');
    $eps= explode(\',\',$extraParams);
    $extraParams = array();
    foreach ($eps as $ep) {
        $ep = explode(\'=\',$ep);
        if (!empty($ep[1])) {
            $extraParams[$ep[0]] = $ep[1];
        }
    }
}

/* iterate */
$tags = array();
foreach ($items as $item) {
    $itemArray = array();
    $itemArray[\'item\'] = trim($item);
    $params = array();
    if (empty($useTagsFurl)) {
        $params = array(
            $tagRequestParam => $itemArray[\'item\'],
            $tagKeyVar => $tagKey,
        );
    }

    if (!empty($extraParams)) {
        $params = array_merge($extraParams,$params);
    }
    $itemArray[\'url\'] = $modx->makeUrl($target,\'\',$params);
    if (!empty($useTagsFurl)) {
         $itemArray[\'url\'] = rtrim($itemArray[\'url\'],\'/\').\'/\'.$tagKey.\'/\'.$itemArray[\'item\'];
    }
    $itemArray[\'url\'] = str_replace(\' \',\'+\',$itemArray[\'url\']);
    $itemArray[\'cls\'] = $cls;
    $tags[] = $tagLister->getChunk($tpl,$itemArray);
}

/* output */
$toPlaceholder = $modx->getOption(\'toPlaceholder\',$scriptProperties,false);
$output = trim(implode($outputDelim,$tags),$outputDelim);
if ($toPlaceholder) {
    $modx->setPlaceholder($toPlaceholder,$output);
    return \'\';
}
return $output;',
          'locked' => false,
          'properties' => 
          array (
            'items' => 
            array (
              'name' => 'items',
              'desc' => 'prop_tolinks.items_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'taglister:properties',
              'area' => '',
              'desc_trans' => 'The items to turn into links.',
              'area_trans' => '',
            ),
            'tpl' => 
            array (
              'name' => 'tpl',
              'desc' => 'prop_tolinks.tpl_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'link',
              'lexicon' => 'taglister:properties',
              'area' => '',
              'desc_trans' => 'Name of a Chunk that will be used for each result.',
              'area_trans' => '',
            ),
            'target' => 
            array (
              'name' => 'target',
              'desc' => 'prop_tolinks.target_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'taglister:properties',
              'area' => '',
              'desc_trans' => 'The ID of the Resource that links will point to. Defaults to the current Resource.',
              'area_trans' => '',
            ),
            'inputDelim' => 
            array (
              'name' => 'inputDelim',
              'desc' => 'prop_tolinks.inputdelim_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => ',',
              'lexicon' => 'taglister:properties',
              'area' => '',
              'desc_trans' => 'The delimiter that is used on the items property. Defaults to a comma.',
              'area_trans' => '',
            ),
            'outputDelim' => 
            array (
              'name' => 'outputDelim',
              'desc' => 'prop_tolinks.outputdelim_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => ', ',
              'lexicon' => 'taglister:properties',
              'area' => '',
              'desc_trans' => 'The delimiter that separates the links that are outputted. Defaults to a comma.',
              'area_trans' => '',
            ),
            'tagRequestParam' => 
            array (
              'name' => 'tagRequestParam',
              'desc' => 'prop_tolinks.tagrequestparam_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'tag',
              'lexicon' => 'taglister:properties',
              'area' => '',
              'desc_trans' => 'The REQUEST var key that will be used in generating the links.',
              'area_trans' => '',
            ),
            'tagKeyVar' => 
            array (
              'name' => 'tagKeyVar',
              'desc' => 'prop_tolinks.tagkeyvar_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'key',
              'lexicon' => 'taglister:properties',
              'area' => '',
              'desc_trans' => 'The REQUEST var of the tv name. Used in the links generated for each tag result',
              'area_trans' => '',
            ),
            'tagKey' => 
            array (
              'name' => 'tagKey',
              'desc' => 'prop_tolinks.tagkey_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'tags',
              'lexicon' => 'taglister:properties',
              'area' => '',
              'desc_trans' => 'The REQUEST var of the tag value. Used in the links generated for each tag result.',
              'area_trans' => '',
            ),
            'cls' => 
            array (
              'name' => 'cls',
              'desc' => 'prop_tolinks.cls_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'tl-tag',
              'lexicon' => 'taglister:properties',
              'area' => '',
              'desc_trans' => 'Name of a CSS class to add to each result.',
              'area_trans' => '',
            ),
            'toPlaceholder' => 
            array (
              'name' => 'toPlaceholder',
              'desc' => 'prop_tolinks.toplaceholder_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'taglister:properties',
              'area' => '',
              'desc_trans' => 'If set, will set the output of this snippet to this placeholder rather than output it.',
              'area_trans' => '',
            ),
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => '',
          'content' => '/**
 * tagLister
 *
 * Copyright 2010 by Shaun McCormick <shaun@modxcms.com>
 *
 * This file is part of tagLister, a simple tag listing snippet for MODx
 * Revolution.
 *
 * tagLister is free software; you can redistribute it and/or modify it under
 * the terms of the GNU General Public License as published by the Free Software
 * Foundation; either version 2 of the License, or (at your option) any later
 * version.
 *
 * tagLister is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU General Public License for more
 * details.
 *
 * You should have received a copy of the GNU General Public License along with
 * tagLister; if not, write to the Free Software Foundation, Inc., 59 Temple
 * Place, Suite 330, Boston, MA 02111-1307 USA
 *
 * @package taglister
 */
/**
 * tolinks snippet. Creates links out of tags.
 *
 * @var modX $modx
 * @var tagLister $tagLister
 * @var array $scriptProperties
 * 
 * @package taglister
 */
$tagLister = $modx->getService(\'taglister\',\'TagLister\',$modx->getOption(\'taglister.core_path\',null,$modx->getOption(\'core_path\').\'components/taglister/\').\'model/taglister/\',$scriptProperties);
if (!($tagLister instanceof TagLister)) return \'\';

/* setup default properties */
$inputDelim = $modx->getOption(\'inputDelim\',$scriptProperties,\',\');
$outputDelim = $modx->getOption(\'outputDelim\',$scriptProperties,\', \');
$tagRequestParam = $modx->getOption(\'tagRequestParam\',$scriptProperties,\'tag\');
$tagKeyVar = $modx->getOption(\'tagKeyVar\',$scriptProperties,\'key\');
$tagKey = $modx->getOption(\'tagKey\',$scriptProperties,\'tags\');
$target = !empty($scriptProperties[\'target\']) ? $scriptProperties[\'target\'] : $modx->resource->get(\'id\');
$tpl = $modx->getOption(\'tpl\',$scriptProperties,\'link\');
$cls = $modx->getOption(\'cls\',$scriptProperties,\'tl-tag\');
$useTagsFurl = $modx->getOption(\'useTagsFurl\',$scriptProperties,false);

/* get items */
$items = $modx->getOption(\'items\',$scriptProperties,\'\');
if (empty($items)) return \'\';
$items = explode($inputDelim,$items);

/* if extra params, set em */
$extraParams = $modx->getOption(\'extraParams\',$scriptProperties,\'\');
if (!empty($extraParams)) {
    $extraParams = trim(trim(trim($extraParams,\'?\'),\'&\'),\'&amp;\');
    $eps= explode(\',\',$extraParams);
    $extraParams = array();
    foreach ($eps as $ep) {
        $ep = explode(\'=\',$ep);
        if (!empty($ep[1])) {
            $extraParams[$ep[0]] = $ep[1];
        }
    }
}

/* iterate */
$tags = array();
foreach ($items as $item) {
    $itemArray = array();
    $itemArray[\'item\'] = trim($item);
    $params = array();
    if (empty($useTagsFurl)) {
        $params = array(
            $tagRequestParam => $itemArray[\'item\'],
            $tagKeyVar => $tagKey,
        );
    }

    if (!empty($extraParams)) {
        $params = array_merge($extraParams,$params);
    }
    $itemArray[\'url\'] = $modx->makeUrl($target,\'\',$params);
    if (!empty($useTagsFurl)) {
         $itemArray[\'url\'] = rtrim($itemArray[\'url\'],\'/\').\'/\'.$tagKey.\'/\'.$itemArray[\'item\'];
    }
    $itemArray[\'url\'] = str_replace(\' \',\'+\',$itemArray[\'url\']);
    $itemArray[\'cls\'] = $cls;
    $tags[] = $tagLister->getChunk($tpl,$itemArray);
}

/* output */
$toPlaceholder = $modx->getOption(\'toPlaceholder\',$scriptProperties,false);
$output = trim(implode($outputDelim,$tags),$outputDelim);
if ($toPlaceholder) {
    $modx->setPlaceholder($toPlaceholder,$output);
    return \'\';
}
return $output;',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
        ),
      ),
      'QuipCount' => 
      array (
        'fields' => 
        array (
          'id' => 23,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'QuipCount',
          'description' => 'An assistance snippet for getting thread/user comment counts.',
          'editor_type' => 0,
          'category' => 6,
          'cache_type' => 0,
          'snippet' => '/**
 * Quip
 *
 * Copyright 2010-11 by Shaun McCormick <shaun@modx.com>
 *
 * This file is part of Quip, a simple commenting component for MODx Revolution.
 *
 * Quip is free software; you can redistribute it and/or modify it under the
 * terms of the GNU General Public License as published by the Free Software
 * Foundation; either version 2 of the License, or (at your option) any later
 * version.
 *
 * Quip is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * Quip; if not, write to the Free Software Foundation, Inc., 59 Temple Place,
 * Suite 330, Boston, MA 02111-1307 USA
 *
 * @package quip
 */
/**
 * QuipCount
 *
 * Gets the total # of comments in a thread or by a user.
 *
 * @var modX $modx
 * @var array $scriptProperties
 * @var Quip $quip
 *
 * @name QuipCount
 * @author Shaun McCormick <shaun@modx.com>
 * @package quip
 */
$quip = $modx->getService(\'quip\',\'Quip\',$modx->getOption(\'quip.core_path\',null,$modx->getOption(\'core_path\').\'components/quip/\').\'model/quip/\',$scriptProperties);
if (!($quip instanceof Quip)) return \'\';
$quip->initialize($modx->context->get(\'key\'));
$controller = $quip->loadController(\'ThreadCount\');
$output = $controller->run($scriptProperties);
return $output;',
          'locked' => false,
          'properties' => 
          array (
            'type' => 
            array (
              'name' => 'type',
              'desc' => 'quip.prop_count_type_desc',
              'type' => 'list',
              'options' => 
              array (
                0 => 
                array (
                  'text' => 'quip.thread',
                  'value' => 'thread',
                  'name' => 'Thread',
                ),
                1 => 
                array (
                  'text' => 'quip.user',
                  'value' => 'user',
                  'name' => 'User',
                ),
                2 => 
                array (
                  'text' => 'quip.family',
                  'value' => 'family',
                  'name' => 'Family',
                ),
              ),
              'value' => 'thread',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If contains `thread`, will count the # of comments in a thread. If contains `user`, will grab # of total comments by a User. Supports a comma-delimited list of types.',
              'area_trans' => '',
            ),
            'thread' => 
            array (
              'name' => 'thread',
              'desc' => 'quip.prop_count_thread_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The thread ID to pull from. Only if type contains `thread`.',
              'area_trans' => '',
            ),
            'user' => 
            array (
              'name' => 'user',
              'desc' => 'quip.prop_count_user_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The User ID or username to pull from. Only if type contains `user`.',
              'area_trans' => '',
            ),
            'family' => 
            array (
              'name' => 'family',
              'desc' => 'quip.prop_count_family_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The family of threads to pull from. Only if type contains `family`.',
              'area_trans' => '',
            ),
            'toPlaceholder' => 
            array (
              'name' => 'toPlaceholder',
              'desc' => 'quip.prop_count_toplaceholder_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If set, will output the content to the placeholder specified in this property, rather than outputting the content directly.',
              'area_trans' => '',
            ),
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => '',
          'content' => '/**
 * Quip
 *
 * Copyright 2010-11 by Shaun McCormick <shaun@modx.com>
 *
 * This file is part of Quip, a simple commenting component for MODx Revolution.
 *
 * Quip is free software; you can redistribute it and/or modify it under the
 * terms of the GNU General Public License as published by the Free Software
 * Foundation; either version 2 of the License, or (at your option) any later
 * version.
 *
 * Quip is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * Quip; if not, write to the Free Software Foundation, Inc., 59 Temple Place,
 * Suite 330, Boston, MA 02111-1307 USA
 *
 * @package quip
 */
/**
 * QuipCount
 *
 * Gets the total # of comments in a thread or by a user.
 *
 * @var modX $modx
 * @var array $scriptProperties
 * @var Quip $quip
 *
 * @name QuipCount
 * @author Shaun McCormick <shaun@modx.com>
 * @package quip
 */
$quip = $modx->getService(\'quip\',\'Quip\',$modx->getOption(\'quip.core_path\',null,$modx->getOption(\'core_path\').\'components/quip/\').\'model/quip/\',$scriptProperties);
if (!($quip instanceof Quip)) return \'\';
$quip->initialize($modx->context->get(\'key\'));
$controller = $quip->loadController(\'ThreadCount\');
$output = $controller->run($scriptProperties);
return $output;',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
        ),
      ),
      'Quip' => 
      array (
        'fields' => 
        array (
          'id' => 22,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'Quip',
          'description' => 'A simple commenting component.',
          'editor_type' => 0,
          'category' => 6,
          'cache_type' => 0,
          'snippet' => '/**
 * Quip
 *
 * Copyright 2010-11 by Shaun McCormick <shaun@modx.com>
 *
 * This file is part of Quip, a simple commenting component for MODx Revolution.
 *
 * Quip is free software; you can redistribute it and/or modify it under the
 * terms of the GNU General Public License as published by the Free Software
 * Foundation; either version 2 of the License, or (at your option) any later
 * version.
 *
 * Quip is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * Quip; if not, write to the Free Software Foundation, Inc., 59 Temple Place,
 * Suite 330, Boston, MA 02111-1307 USA
 *
 * @package quip
 */
/**
 * Quip
 *
 * A simple comments component.
 *
 * @var modX $modx
 * @var array $scriptProperties
 *
 * @name Quip
 * @author Shaun McCormick <shaun@modx.com>
 * @package quip
 */
/** @var Quip $quip */
$quip = $modx->getService(\'quip\',\'Quip\',$modx->getOption(\'quip.core_path\',null,$modx->getOption(\'core_path\').\'components/quip/\').\'model/quip/\',$scriptProperties);
if (!($quip instanceof Quip)) return \'\';

$quip->initialize($modx->context->get(\'key\'));

$controller = $quip->loadController(\'Thread\');
$output = $controller->run($scriptProperties);
return $output;',
          'locked' => false,
          'properties' => 
          array (
            'thread' => 
            array (
              'name' => 'thread',
              'desc' => 'quip.prop_thread_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The unique name of the thread.',
              'area_trans' => '',
            ),
            'parent' => 
            array (
              'name' => 'parent',
              'desc' => 'quip.prop_parent_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '0',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The parent to start at when displaying the thread.',
              'area_trans' => '',
            ),
            'threaded' => 
            array (
              'name' => 'threaded',
              'desc' => 'quip.prop_threaded_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => true,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'Whether or not this thread can have threaded comments.',
              'area_trans' => '',
            ),
            'maxDepth' => 
            array (
              'name' => 'maxDepth',
              'desc' => 'quip.prop_maxdepth_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 5,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The maximum depth that replies can be made in a threaded comment thread.',
              'area_trans' => '',
            ),
            'replyResourceId' => 
            array (
              'name' => 'replyResourceId',
              'desc' => 'quip.prop_replyresourceid_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The ID of the Resource where the QuipReply snippet is held, for replying to threaded comments.',
              'area_trans' => '',
            ),
            'threadedPostMargin' => 
            array (
              'name' => 'threadedPostMargin',
              'desc' => 'quip.prop_threadedpostmargin_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 15,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The margin, in pixels, by which threaded comments are moved right for each depth level that they go.',
              'area_trans' => '',
            ),
            'requireAuth' => 
            array (
              'name' => 'requireAuth',
              'desc' => 'quip.prop_requireauth_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If set to true, only logged-in users can post comments.',
              'area_trans' => '',
            ),
            'requireUsergroups' => 
            array (
              'name' => 'requireUsergroups',
              'desc' => 'quip.prop_requireusergroups_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'Optional. A comma-separated list of User Groups to restrict commenting to.',
              'area_trans' => '',
            ),
            'closed' => 
            array (
              'name' => 'closed',
              'desc' => 'quip.prop_closed_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If set to true, the thread will not accept new comments.',
              'area_trans' => '',
            ),
            'closeAfter' => 
            array (
              'name' => 'closeAfter',
              'desc' => 'quip.prop_closeafter_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 14,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'Will automatically close the thread to new comments after this number of days. Set to 0 to leave infinitely open.',
              'area_trans' => '',
            ),
            'dateFormat' => 
            array (
              'name' => 'dateFormat',
              'desc' => 'quip.prop_dateformat_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '%b %d, %Y at %I:%M %p',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The format of the dates displayed for a comment.',
              'area_trans' => '',
            ),
            'useMargins' => 
            array (
              'name' => 'useMargins',
              'desc' => 'quip.prop_usemargins_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If false, Quip will use ol/li items for each comment and threaded comment. If true, will use padded margins for each comment in threading.',
              'area_trans' => '',
            ),
            'useCss' => 
            array (
              'name' => 'useCss',
              'desc' => 'quip.prop_usecss_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => true,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If true, Quip will provide a basic CSS template for the presentation.',
              'area_trans' => '',
            ),
            'rowCss' => 
            array (
              'name' => 'rowCss',
              'desc' => 'quip.prop_rowcss_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quip-comment',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The CSS class to put on each comment\'s outer div container.',
              'area_trans' => '',
            ),
            'altRowCss' => 
            array (
              'name' => 'altRowCss',
              'desc' => 'quip.prop_altrowcss_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quip-comment-alt',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The CSS class to put on alternating comments.',
              'area_trans' => '',
            ),
            'olCss' => 
            array (
              'name' => 'olCss',
              'desc' => 'quip.prop_olcss_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quip-comment-parent',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The CSS class to put in the parent ol tags for each comment.',
              'area_trans' => '',
            ),
            'unapprovedCss' => 
            array (
              'name' => 'unapprovedCss',
              'desc' => 'quip.prop_unapprovedcss_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quip-unapproved',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The CSS class to put on unapproved comments.',
              'area_trans' => '',
            ),
            'authorTpl' => 
            array (
              'name' => 'authorTpl',
              'desc' => 'quip.prop_authortpl_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quipAuthorTpl',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'A name of a Chunk to use for the Author name in the comment.',
              'area_trans' => '',
            ),
            'nameField' => 
            array (
              'name' => 'nameField',
              'desc' => 'quip.prop_namefield_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'username',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The field to use for the author name of each comment. Recommended values are "name" or "username".',
              'area_trans' => '',
            ),
            'showAnonymousName' => 
            array (
              'name' => 'showAnonymousName',
              'desc' => 'quip.prop_showanonymousname_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If true, will display the value of anonymousName property (defaults to "Anonymous") if the user is not logged in when posting.',
              'area_trans' => '',
            ),
            'anonymousName' => 
            array (
              'name' => 'anonymousName',
              'desc' => 'quip.prop_anonymousname_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The name to display for anonymous postings. Defaults to "Anonymous".',
              'area_trans' => '',
            ),
            'allowRemove' => 
            array (
              'name' => 'allowRemove',
              'desc' => 'quip.prop_allowremove_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => true,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'Allow logged-in users to remove their own postings.',
              'area_trans' => '',
            ),
            'removeThreshold' => 
            array (
              'name' => 'removeThreshold',
              'desc' => 'quip.prop_removethreshold_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 3,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If allowRemove is true, the number of minutes a user can remove their posting after they have posted it. Defaults to 3 minutes.',
              'area_trans' => '',
            ),
            'allowReportAsSpam' => 
            array (
              'name' => 'allowReportAsSpam',
              'desc' => 'quip.prop_allowreportasspam_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => true,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'Allow logged-in users to report comments as spam.',
              'area_trans' => '',
            ),
            'useGravatar' => 
            array (
              'name' => 'useGravatar',
              'desc' => 'quip.prop_usegravatar_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => true,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If true, will attempt to use Gravatar images for avatars.',
              'area_trans' => '',
            ),
            'gravatarIcon' => 
            array (
              'name' => 'gravatarIcon',
              'desc' => 'quip.prop_gravataricon_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'identicon',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The default Gravatar icon to load if none is found for a user.',
              'area_trans' => '',
            ),
            'gravatarSize' => 
            array (
              'name' => 'gravatarSize',
              'desc' => 'quip.prop_gravatarsize_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 50,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The size, in pixels, of the Gravatar.',
              'area_trans' => '',
            ),
            'sortBy' => 
            array (
              'name' => 'sortBy',
              'desc' => 'quip.prop_sortby_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'rank',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The field to sort by.',
              'area_trans' => '',
            ),
            'sortByAlias' => 
            array (
              'name' => 'sortByAlias',
              'desc' => 'quip.prop_sortbyalias_desc',
              'type' => 'list',
              'options' => 
              array (
                0 => 
                array (
                  'text' => 'quip.comment',
                  'value' => 'quipComment',
                  'name' => 'Comment',
                ),
                1 => 
                array (
                  'text' => 'quip.author',
                  'value' => 'Author',
                  'name' => 'Author',
                ),
              ),
              'value' => 'quipComment',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The alias of classes to use with sort by.',
              'area_trans' => '',
            ),
            'sortDir' => 
            array (
              'name' => 'sortDir',
              'desc' => 'quip.prop_sortdir_desc',
              'type' => 'list',
              'options' => 
              array (
                0 => 
                array (
                  'text' => 'quip.ascending',
                  'value' => 'ASC',
                  'name' => 'Ascending',
                ),
                1 => 
                array (
                  'text' => 'quip.descending',
                  'value' => 'DESC',
                  'name' => 'Descending',
                ),
              ),
              'value' => 'ASC',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The direction to sort by.',
              'area_trans' => '',
            ),
            'toPlaceholder' => 
            array (
              'name' => 'toPlaceholder',
              'desc' => 'quip.prop_toplaceholder_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If set, will output the content to the placeholder specified in this property, rather than outputting the content directly.',
              'area_trans' => '',
            ),
            'placeholderPrefix' => 
            array (
              'name' => 'placeholderPrefix',
              'desc' => 'quip.prop_placeholderprefix_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quip',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The prefix for the global placeholders set by Quip.',
              'area_trans' => '',
            ),
            'tplComment' => 
            array (
              'name' => 'tplComment',
              'desc' => 'quip.prop_tplcomment_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quipComment',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'A Chunk for the comment itself.',
              'area_trans' => '',
            ),
            'tplCommentOptions' => 
            array (
              'name' => 'tplCommentOptions',
              'desc' => 'quip.prop_tplcommentoptions_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quipCommentOptions',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'A Chunk for the options, such as delete, shown to an owner of a comment.',
              'area_trans' => '',
            ),
            'tplComments' => 
            array (
              'name' => 'tplComments',
              'desc' => 'quip.prop_tplcomments_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quipComments',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'A Chunk for the outer wrapper for comments.',
              'area_trans' => '',
            ),
            'tplReport' => 
            array (
              'name' => 'tplReport',
              'desc' => 'quip.prop_tplreport_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quipReport',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The link on a comment to report as spam. Can either be a chunk name or value. If set to a value, will override the chunk.',
              'area_trans' => '',
            ),
            'reportAction' => 
            array (
              'name' => 'reportAction',
              'desc' => 'quip.prop_reportaction_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quip_report',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The name of the submit field to initiate a comment report as spam.',
              'area_trans' => '',
            ),
            'removeAction' => 
            array (
              'name' => 'removeAction',
              'desc' => 'quip.prop_removeaction_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quip_remove',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The name of the submit field to initiate a comment remove.',
              'area_trans' => '',
            ),
            'idPrefix' => 
            array (
              'name' => 'idPrefix',
              'desc' => 'quip.prop_idprefix_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'qcom',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If you want to use multiple Quip instances on a page, change this ID prefix.',
              'area_trans' => '',
            ),
            'debug' => 
            array (
              'name' => 'debug',
              'desc' => 'quip.prop_debug_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'Set to true to turn on debug mode. Not recommended for production sites.',
              'area_trans' => '',
            ),
            'debugUser' => 
            array (
              'name' => 'debugUser',
              'desc' => 'quip.prop_debuguser_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If debug is on, will set the username of $modx->user to this value.',
              'area_trans' => '',
            ),
            'debugUserId' => 
            array (
              'name' => 'debugUserId',
              'desc' => 'quip.prop_debuguserid_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If debug is on, will set the id of $modx->user to this value.',
              'area_trans' => '',
            ),
            'limit' => 
            array (
              'name' => 'limit',
              'desc' => 'quip.prop_limit_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 0,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The number of comments to limit per page. Setting this to a non-zero number will enable pagination.',
              'area_trans' => '',
            ),
            'start' => 
            array (
              'name' => 'start',
              'desc' => 'quip.prop_start_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 0,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The default comment index to start on. Recommended to leave at 0.',
              'area_trans' => '',
            ),
            'tplPagination' => 
            array (
              'name' => 'tplPagination',
              'desc' => 'quip.prop_tplpagination_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quipPagination',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'A Chunk for the pagination OL wrapper.',
              'area_trans' => '',
            ),
            'tplPaginationItem' => 
            array (
              'name' => 'tplPaginationItem',
              'desc' => 'quip.prop_tplpaginationitem_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quipPaginationItem',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'A Chunk for each non-current pagination number link.',
              'area_trans' => '',
            ),
            'tplPaginationCurrentItem' => 
            array (
              'name' => 'tplPaginationCurrentItem',
              'desc' => 'quip.prop_tplpaginationcurrentitem_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quipPaginationCurrentItem',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'A Chunk for the current pagination number link.',
              'area_trans' => '',
            ),
            'paginationCls' => 
            array (
              'name' => 'paginationCls',
              'desc' => 'quip.prop_paginationcls_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quip-pagination',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'A CSS class to put on the pagination OL wrapper.',
              'area_trans' => '',
            ),
            'pageCls' => 
            array (
              'name' => 'pageCls',
              'desc' => 'quip.prop_pagecls_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quip-page-number',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'A CSS class to put on a non-current pagination number link.',
              'area_trans' => '',
            ),
            'currentPageCls' => 
            array (
              'name' => 'currentPageCls',
              'desc' => 'quip.prop_currentpagecls_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quip-page-current',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'A CSS class to put on the current pagination number.',
              'area_trans' => '',
            ),
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => '',
          'content' => '/**
 * Quip
 *
 * Copyright 2010-11 by Shaun McCormick <shaun@modx.com>
 *
 * This file is part of Quip, a simple commenting component for MODx Revolution.
 *
 * Quip is free software; you can redistribute it and/or modify it under the
 * terms of the GNU General Public License as published by the Free Software
 * Foundation; either version 2 of the License, or (at your option) any later
 * version.
 *
 * Quip is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * Quip; if not, write to the Free Software Foundation, Inc., 59 Temple Place,
 * Suite 330, Boston, MA 02111-1307 USA
 *
 * @package quip
 */
/**
 * Quip
 *
 * A simple comments component.
 *
 * @var modX $modx
 * @var array $scriptProperties
 *
 * @name Quip
 * @author Shaun McCormick <shaun@modx.com>
 * @package quip
 */
/** @var Quip $quip */
$quip = $modx->getService(\'quip\',\'Quip\',$modx->getOption(\'quip.core_path\',null,$modx->getOption(\'core_path\').\'components/quip/\').\'model/quip/\',$scriptProperties);
if (!($quip instanceof Quip)) return \'\';

$quip->initialize($modx->context->get(\'key\'));

$controller = $quip->loadController(\'Thread\');
$output = $controller->run($scriptProperties);
return $output;',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
        ),
      ),
      'QuipReply' => 
      array (
        'fields' => 
        array (
          'id' => 25,
          'source' => 0,
          'property_preprocess' => false,
          'name' => 'QuipReply',
          'description' => 'Displays a reply form for comments.',
          'editor_type' => 0,
          'category' => 6,
          'cache_type' => 0,
          'snippet' => '/**
 * Quip
 *
 * Copyright 2010-11 by Shaun McCormick <shaun@modx.com>
 *
 * This file is part of Quip, a simple commenting component for MODx Revolution.
 *
 * Quip is free software; you can redistribute it and/or modify it under the
 * terms of the GNU General Public License as published by the Free Software
 * Foundation; either version 2 of the License, or (at your option) any later
 * version.
 *
 * Quip is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * Quip; if not, write to the Free Software Foundation, Inc., 59 Temple Place,
 * Suite 330, Boston, MA 02111-1307 USA
 *
 * @package quip
 */
/**
 * Displays a reply form for a thread
 *
 * @var modX $modx
 * @var array $scriptProperties
 * @var Quip $quip
 *
 * @name QuipReply
 * @author Shaun McCormick <shaun@modx.com>
 * @package quip
 */
$quip = $modx->getService(\'quip\',\'Quip\',$modx->getOption(\'quip.core_path\',null,$modx->getOption(\'core_path\').\'components/quip/\').\'model/quip/\',$scriptProperties);
if (!($quip instanceof Quip)) return \'\';

$quip->initialize($modx->context->get(\'key\'));
$controller = $quip->loadController(\'ThreadReply\');
$output = $controller->run($scriptProperties);
return $output;

/* get thread */
$thread = $modx->getOption(\'quip_thread\',$_REQUEST,$modx->getOption(\'thread\',$scriptProperties,\'\'));
if (empty($thread)) return \'\';
$thread = $modx->getObject(\'quipThread\',array(\'name\' => $thread));
if (!$thread) return \'\';

/* sync properties with thread row values */
$thread->sync($scriptProperties);
$ps = $thread->get(\'quipreply_call_params\');
if (!empty($ps)) {
    $diff = array_diff_assoc($ps,$scriptProperties);
    if (empty($diff)) $diff = array_diff_assoc($scriptProperties,$ps);
}
if (empty($_REQUEST[\'quip_thread\']) && (!empty($diff) || empty($ps))) { /* only sync call params if not on threaded reply page */
    $thread->set(\'quipreply_call_params\',$scriptProperties);
    $thread->save();
}
/* if in threaded reply page, get the original passing values to QuipReply in the thread\'s main page and use those */
if (!empty($_REQUEST[\'quip_thread\']) && is_array($ps) && !empty($ps)) $scriptProperties = array_merge($scriptProperties,$ps);
unset($ps,$diff);

/* setup default properties */
$requireAuth = $modx->getOption(\'requireAuth\',$scriptProperties,false);
$requireUsergroups = $modx->getOption(\'requireUsergroups\',$scriptProperties,false);
$addCommentTpl = $modx->getOption(\'tplAddComment\',$scriptProperties,\'quipAddComment\');
$loginToCommentTpl = $modx->getOption(\'tplLoginToComment\',$scriptProperties,\'quipLoginToComment\');
$previewTpl = $modx->getOption(\'tplPreview\',$scriptProperties,\'quipPreviewComment\');
$closeAfter = $modx->getOption(\'closeAfter\',$scriptProperties,14);
$requirePreview = $modx->getOption(\'requirePreview\',$scriptProperties,false);
$previewAction = $modx->getOption(\'previewAction\',$scriptProperties,\'quip-preview\');
$postAction = $modx->getOption(\'postAction\',$scriptProperties,\'quip-post\');
$allowedTags = $modx->getOption(\'quip.allowed_tags\',$scriptProperties,\'<br><b><i>\');
$preHooks = $modx->getOption(\'preHooks\',$scriptProperties,\'\');
$postHooks = $modx->getOption(\'postHooks\',$scriptProperties,\'\');
$unsubscribeAction = $modx->getOption(\'unsubscribeAction\',$scriptProperties,\'quip_unsubscribe\');

/* get parent and auth */
$parent = $modx->getOption(\'quip_parent\',$_REQUEST,$modx->getOption(\'parent\',$scriptProperties,0));
$hasAuth = $modx->user->hasSessionContext($modx->context->get(\'key\')) || $modx->getOption(\'debug\',$scriptProperties,false) || empty($requireAuth);
if (!empty($requireUsergroups)) {
    $requireUsergroups = explode(\',\',$requireUsergroups);
    $hasAuth = $modx->user->isMember($requireUsergroups);
}

/* setup default placeholders */
$placeholders = array();
$p = $modx->request->getParameters();
unset($p[\'reported\'],$p[\'quip_approved\']);
$placeholders[\'parent\'] = $parent;
$placeholders[\'thread\'] = $thread->get(\'name\');
$placeholders[\'url\'] = $modx->makeUrl($modx->resource->get(\'id\'),\'\',$p);
$placeholders[\'idprefix\'] = $thread->get(\'idprefix\');

/* handle POST */
$fields = array();
$hasPreview = false;
if (!empty($_POST)) {
    foreach ($_POST as $k => $v) {
        $fields[$k] = str_replace(array(\'[\',\']\'),array(\'&#91;\',\'&#93;\'),$v);
    }
    
    $fields[\'name\'] = strip_tags($fields[\'name\']);
    $fields[\'email\'] = strip_tags($fields[\'email\']);
    $fields[\'website\'] = strip_tags($fields[\'website\']);
    
    /* verify a message was posted */
    if (empty($fields[\'comment\'])) $errors[\'comment\'] = $modx->lexicon(\'quip.message_err_ns\');
    if (empty($fields[\'name\'])) $errors[\'name\'] = $modx->lexicon(\'quip.name_err_ns\');
    if (empty($fields[\'email\'])) $errors[\'email\'] = $modx->lexicon(\'quip.email_err_ns\');
    
    if (!empty($_POST[$postAction]) && empty($errors)) {
        $comment = include_once $quip->config[\'processorsPath\'].\'web/comment/create.php\';
        if (is_object($comment) && $comment instanceof quipComment) {
            $params = $modx->request->getParameters();
            unset($params[$postAction],$params[\'quip_parent\'],$params[\'quip_thread\']);
            $params[\'quip_approved\'] = $comment->get(\'approved\') ? 1 : 0;
            $url = $comment->makeUrl(\'\',$params);

            /* if not approved, remove # and replace with success message #
             * since comment is not yet visible
             */
            if (!$comment->get(\'approved\')) {
                $url = str_replace(\'#\'.$thread->get(\'idprefix\').$comment->get(\'id\'),\'#quip-success-\'.$thread->get(\'idprefix\'),$url);
            }
            $modx->sendRedirect($url);
        } else if (is_array($comment)) {
            $errors = array_merge($errors,$comment);
        }
        $fields[$previewAction] = true;
    }
    /* handle preview */
    else if (!empty($fields[$previewAction]) && empty($errors)) {
        $errors = include_once $quip->config[\'processorsPath\'].\'web/comment/preview.php\';
    }
    if (!empty($errors)) {
        $placeholders[\'error\'] = implode("<br />\\n",$errors);
        foreach ($errors as $k => $v) {
            $placeholders[\'error.\'.$k] = $v;
        }
        $placeholders = array_merge($placeholders,$fields);
    }
}
/* display moderated success message */
if (isset($_GET[\'quip_approved\']) && $_GET[\'quip_approved\'] == 0) {
    $placeholders[\'successMsg\'] = $modx->lexicon(\'quip.comment_will_be_moderated\');
}

/* handle unsubscribing from thread */
if (!empty($_GET[$unsubscribeAction]) && $modx->user->hasSessionContext($modx->context->get(\'key\'))) {
    $profile = $modx->user->getOne(\'Profile\');
    if ($profile) {
        $notify = $modx->getObject(\'quipCommentNotify\',array(
            \'email\' => $profile->get(\'email\'),
            \'thread\' => $thread,
        ));
        if ($notify && $notify->remove()) {
            $placeholders[\'successMsg\'] = $modx->lexicon(\'quip.unsubscribed\');
        }
    }
}

/* if using recaptcha, load recaptcha html if user is not logged in */
$disableRecaptchaWhenLoggedIn = (boolean)$modx->getOption(\'disableRecaptchaWhenLoggedIn\',$scriptProperties,true);
$useRecaptcha = (boolean)$modx->getOption(\'recaptcha\',$scriptProperties,false);
if ($useRecaptcha && !($disableRecaptchaWhenLoggedIn && $hasAuth) && !$hasPreview) {
    $recaptcha = $modx->getService(\'recaptcha\',\'reCaptcha\',$quip->config[\'modelPath\'].\'recaptcha/\');
    if ($recaptcha instanceof reCaptcha) {
        $recaptchaTheme = $modx->getOption(\'recaptchaTheme\',$scriptProperties,\'clean\');
        $html = $recaptcha->getHtml($recaptchaTheme);
        $modx->setPlaceholder(\'quip.recaptcha_html\',$html);
    } else {
        return $modx->lexicon(\'quip.recaptcha_err_load\');
    }
}

/* build reply form */
$replyForm = \'\';

$stillOpen = $thread->checkIfStillOpen($closeAfter) && !$modx->getOption(\'closed\',$scriptProperties,false);
if ($hasAuth && $stillOpen) {
    $phs = array_merge($placeholders,array(
        \'username\' => $modx->user->get(\'username\'),
    ));
    $phs[\'unsubscribe\'] = \'\';

    /* prefill fields */
    $profile = $modx->user->getOne(\'Profile\');
    if ($profile) {
        $phs[\'name\'] = !empty($fields[\'name\']) ? $fields[\'name\'] : $profile->get(\'fullname\');
        $phs[\'email\'] = !empty($fields[\'email\']) ? $fields[\'email\'] : $profile->get(\'email\');
        $phs[\'website\'] = !empty($fields[\'website\']) ? $fields[\'website\'] : $profile->get(\'website\');

        /* allow for unsubscribing for logged-in users */
        if ($modx->user->hasSessionContext($modx->context->get(\'key\'))) {
            $notify = $modx->getObject(\'quipCommentNotify\',array(
                \'email\' => $profile->get(\'email\'),
                \'thread\' => $thread,
            ));
            if ($notify) {
                $phs[\'notifyId\'] = $notify->get(\'id\');
                $phs[\'unsubscribe\'] = $quip->getChunk(\'quipUnsubscribe\',$phs);
                $params = $modx->request->getParameters();
                $params[$unsubscribeAction] = 1;
                $phs[\'unsubscribeUrl\'] = $modx->makeUrl($modx->resource->get(\'id\'),\'\',$params);
            }
        }
    }

    /* if requirePreview == false, auto-can post */
    if (!$requirePreview) {
        $phs[\'can_post\'] = true;
    }
    $phs[\'post_action\'] = $postAction;
    $phs[\'preview_action\'] = $previewAction;
    $phs[\'allowed_tags\'] = $allowedTags;
    $phs[\'notifyChecked\'] = !empty($fields[\'notify\']) ? \' checked="checked"\' : \'\';

    $replyForm = $quip->getChunk($addCommentTpl,$phs);
} else if (!$stillOpen) {
    $replyForm = $modx->lexicon(\'quip.thread_autoclosed\');
} else {
    $replyForm = $quip->getChunk($loginToCommentTpl,$placeholders);
}

/* output or set to placeholder */
$toPlaceholder = $modx->getOption(\'toPlaceholder\',$scriptProperties,false);
if ($toPlaceholder) {
    $modx->setPlaceholder($toPlaceholder,$replyForm);
    return \'\';
}
return $replyForm;',
          'locked' => false,
          'properties' => 
          array (
            'requireAuth' => 
            array (
              'name' => 'requireAuth',
              'desc' => 'quip.prop_reply_requireauth_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If set to true, only logged-in users can post comments.',
              'area_trans' => '',
            ),
            'requireUsergroups' => 
            array (
              'name' => 'requireUsergroups',
              'desc' => 'quip.prop_reply_requireusergroups_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'Optional. A comma-separated list of User Groups to restrict commenting to.',
              'area_trans' => '',
            ),
            'requirePreview' => 
            array (
              'name' => 'requirePreview',
              'desc' => 'quip.prop_reply_requirepreview_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If set to true, will require a user to preview their comment before posting.',
              'area_trans' => '',
            ),
            'closed' => 
            array (
              'name' => 'closed',
              'desc' => 'quip.prop_reply_closed_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If set to true, the thread will not accept new comments.',
              'area_trans' => '',
            ),
            'closeAfter' => 
            array (
              'name' => 'closeAfter',
              'desc' => 'quip.prop_reply_closeafter_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 14,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'Will automatically close the thread to new comments after this number of days. Set to 0 to leave infinitely open.',
              'area_trans' => '',
            ),
            'moderate' => 
            array (
              'name' => 'moderate',
              'desc' => 'quip.prop_reply_moderate_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If set to true, all new posts to the thread will be moderated.',
              'area_trans' => '',
            ),
            'moderateAnonymousOnly' => 
            array (
              'name' => 'moderateAnonymousOnly',
              'desc' => 'quip.prop_reply_moderateanonymousonly_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If set to true, only anonymous (non-logged-in) users will be moderated.',
              'area_trans' => '',
            ),
            'moderateFirstPostOnly' => 
            array (
              'name' => 'moderateFirstPostOnly',
              'desc' => 'quip.prop_reply_moderatefirstpostonly_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => true,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If set to true, only the first post of the user will be moderated. All subsequent posts will be auto-approved. This only applies to logged-in users.',
              'area_trans' => '',
            ),
            'moderators' => 
            array (
              'name' => 'moderators',
              'desc' => 'quip.prop_reply_moderators_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'A comma-separated list of moderator usernames for this thread.',
              'area_trans' => '',
            ),
            'moderatorGroup' => 
            array (
              'name' => 'moderatorGroup',
              'desc' => 'quip.prop_reply_moderatorgroup_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'Administrator',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'Any Users in this User Group will have moderator access.',
              'area_trans' => '',
            ),
            'dontModerateManagerUsers' => 
            array (
              'name' => 'dontModerateManagerUsers',
              'desc' => 'quip.prop_reply_dontmoderatemanagerusers_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => true,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'Never moderate users that are logged into the Revolution Manager.',
              'area_trans' => '',
            ),
            'dateFormat' => 
            array (
              'name' => 'dateFormat',
              'desc' => 'quip.prop_reply_dateformat_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '%b %d, %Y at %I:%M %p',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The format of the dates displayed for a comment.',
              'area_trans' => '',
            ),
            'useCss' => 
            array (
              'name' => 'useCss',
              'desc' => 'quip.prop_reply_usecss_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => true,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If true, Quip will provide a basic CSS template for the presentation.',
              'area_trans' => '',
            ),
            'notifyEmails' => 
            array (
              'name' => 'notifyEmails',
              'desc' => 'quip.prop_reply_notifyemails_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'A comma-separated list of email addresses to send a notification email to when a new post is made on this thread.',
              'area_trans' => '',
            ),
            'recaptcha' => 
            array (
              'name' => 'recaptcha',
              'desc' => 'quip.prop_reply_recaptcha_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If true, will enable reCaptcha support.',
              'area_trans' => '',
            ),
            'recaptchaTheme' => 
            array (
              'name' => 'recaptchaTheme',
              'desc' => 'quip.prop_reply_recaptchatheme_desc',
              'type' => 'list',
              'options' => 
              array (
                0 => 
                array (
                  'text' => 'quip.opt_red',
                  'value' => 'red',
                  'name' => 'Red',
                ),
                1 => 
                array (
                  'text' => 'quip.opt_white',
                  'value' => 'white',
                  'name' => 'White',
                ),
                2 => 
                array (
                  'text' => 'quip.opt_clean',
                  'value' => 'clean',
                  'name' => 'Clean',
                ),
                3 => 
                array (
                  'text' => 'quip.opt_blackglass',
                  'value' => 'blackglass',
                  'name' => 'Black Glass',
                ),
              ),
              'value' => 'clean',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If `recaptcha` is set to 1, this will select a theme for the reCaptcha widget.',
              'area_trans' => '',
            ),
            'disableRecaptchaWhenLoggedIn' => 
            array (
              'name' => 'disableRecaptchaWhenLoggedIn',
              'desc' => 'quip.prop_reply_disablerecaptchawhenloggedin_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => true,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If the user is logged in, do not use reCaptcha.',
              'area_trans' => '',
            ),
            'autoConvertLinks' => 
            array (
              'name' => 'autoConvertLinks',
              'desc' => 'quip.prop_reply_autoconvertlinks_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => true,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If true, will automatically convert URLs to links.',
              'area_trans' => '',
            ),
            'extraAutoLinksAttributes' => 
            array (
              'name' => 'extraAutoLinksAttributes',
              'desc' => 'quip.prop_reply_extraautolinksattributes_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'Any extra HTML attributes to add to auto-converted links, if autoConvertLinks is set to 1.',
              'area_trans' => '',
            ),
            'useGravatar' => 
            array (
              'name' => 'useGravatar',
              'desc' => 'quip.prop_reply_usegravatar_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => true,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If true, will attempt to use Gravatar images for avatars.',
              'area_trans' => '',
            ),
            'gravatarIcon' => 
            array (
              'name' => 'gravatarIcon',
              'desc' => 'quip.prop_reply_gravataricon_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'identicon',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The default Gravatar icon to load if none is found for a user.',
              'area_trans' => '',
            ),
            'gravatarSize' => 
            array (
              'name' => 'gravatarSize',
              'desc' => 'quip.prop_reply_gravatarsize_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 50,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The size, in pixels, of the Gravatar.',
              'area_trans' => '',
            ),
            'tplAddComment' => 
            array (
              'name' => 'tplAddComment',
              'desc' => 'quip.prop_reply_tpladdcomment_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quipAddComment',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The add comment form. Can either be a chunk name or value. If set to a value, will override the chunk.',
              'area_trans' => '',
            ),
            'tplLoginToComment' => 
            array (
              'name' => 'tplLoginToComment',
              'desc' => 'quip.prop_reply_tpllogintocomment_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quipLoginToComment',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The portion to show when the user is not logged in. Can either be a chunk name or value. If set to a value, will override the chunk.',
              'area_trans' => '',
            ),
            'tplPreview' => 
            array (
              'name' => 'tplPreview',
              'desc' => 'quip.prop_reply_tplpreview_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quipPreviewComment',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The tpl for the preview text. Can either be a chunk name or value. If set to a value, will override the chunk.',
              'area_trans' => '',
            ),
            'tplReport' => 
            array (
              'name' => 'tplReport',
              'desc' => 'quip.prop_reply_tplreport_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quipReport',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The link on a comment to report as spam. Can either be a chunk name or value. If set to a value, will override the chunk.',
              'area_trans' => '',
            ),
            'postAction' => 
            array (
              'name' => 'postAction',
              'desc' => 'quip.prop_reply_postaction_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quip-post',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The name of the submit field to initiate a comment post.',
              'area_trans' => '',
            ),
            'previewAction' => 
            array (
              'name' => 'previewAction',
              'desc' => 'quip.prop_reply_previewaction_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'quip-preview',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'The name of the submit field to initiate a comment preview.',
              'area_trans' => '',
            ),
            'idPrefix' => 
            array (
              'name' => 'idPrefix',
              'desc' => 'quip.prop_reply_idprefix_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => 'qcom',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If you want to use multiple Quip instances on a page, change this ID prefix.',
              'area_trans' => '',
            ),
            'redirectTo' => 
            array (
              'name' => 'redirectTo',
              'desc' => 'quip.prop_reply_redirectto_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'Optional. After posting a reply, redirect to the Resource with this ID.',
              'area_trans' => '',
            ),
            'redirectToUrl' => 
            array (
              'name' => 'redirectToUrl',
              'desc' => 'quip.prop_reply_redirecttourl_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'Optional. After posting a reply, redirect to this absolute URL.',
              'area_trans' => '',
            ),
            'debug' => 
            array (
              'name' => 'debug',
              'desc' => 'quip.prop_reply_debug_desc',
              'type' => 'combo-boolean',
              'options' => '',
              'value' => false,
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'Set to true to turn on debug mode. Not recommended for production sites.',
              'area_trans' => '',
            ),
            'debugUser' => 
            array (
              'name' => 'debugUser',
              'desc' => 'quip.prop_reply_debuguser_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If debug is on, will set the username of $modx->user to this value.',
              'area_trans' => '',
            ),
            'debugUserId' => 
            array (
              'name' => 'debugUserId',
              'desc' => 'quip.prop_reply_debuguserid_desc',
              'type' => 'textfield',
              'options' => '',
              'value' => '',
              'lexicon' => 'quip:properties',
              'area' => '',
              'desc_trans' => 'If debug is on, will set the id of $modx->user to this value.',
              'area_trans' => '',
            ),
          ),
          'moduleguid' => '',
          'static' => false,
          'static_file' => '',
          'content' => '/**
 * Quip
 *
 * Copyright 2010-11 by Shaun McCormick <shaun@modx.com>
 *
 * This file is part of Quip, a simple commenting component for MODx Revolution.
 *
 * Quip is free software; you can redistribute it and/or modify it under the
 * terms of the GNU General Public License as published by the Free Software
 * Foundation; either version 2 of the License, or (at your option) any later
 * version.
 *
 * Quip is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * Quip; if not, write to the Free Software Foundation, Inc., 59 Temple Place,
 * Suite 330, Boston, MA 02111-1307 USA
 *
 * @package quip
 */
/**
 * Displays a reply form for a thread
 *
 * @var modX $modx
 * @var array $scriptProperties
 * @var Quip $quip
 *
 * @name QuipReply
 * @author Shaun McCormick <shaun@modx.com>
 * @package quip
 */
$quip = $modx->getService(\'quip\',\'Quip\',$modx->getOption(\'quip.core_path\',null,$modx->getOption(\'core_path\').\'components/quip/\').\'model/quip/\',$scriptProperties);
if (!($quip instanceof Quip)) return \'\';

$quip->initialize($modx->context->get(\'key\'));
$controller = $quip->loadController(\'ThreadReply\');
$output = $controller->run($scriptProperties);
return $output;

/* get thread */
$thread = $modx->getOption(\'quip_thread\',$_REQUEST,$modx->getOption(\'thread\',$scriptProperties,\'\'));
if (empty($thread)) return \'\';
$thread = $modx->getObject(\'quipThread\',array(\'name\' => $thread));
if (!$thread) return \'\';

/* sync properties with thread row values */
$thread->sync($scriptProperties);
$ps = $thread->get(\'quipreply_call_params\');
if (!empty($ps)) {
    $diff = array_diff_assoc($ps,$scriptProperties);
    if (empty($diff)) $diff = array_diff_assoc($scriptProperties,$ps);
}
if (empty($_REQUEST[\'quip_thread\']) && (!empty($diff) || empty($ps))) { /* only sync call params if not on threaded reply page */
    $thread->set(\'quipreply_call_params\',$scriptProperties);
    $thread->save();
}
/* if in threaded reply page, get the original passing values to QuipReply in the thread\'s main page and use those */
if (!empty($_REQUEST[\'quip_thread\']) && is_array($ps) && !empty($ps)) $scriptProperties = array_merge($scriptProperties,$ps);
unset($ps,$diff);

/* setup default properties */
$requireAuth = $modx->getOption(\'requireAuth\',$scriptProperties,false);
$requireUsergroups = $modx->getOption(\'requireUsergroups\',$scriptProperties,false);
$addCommentTpl = $modx->getOption(\'tplAddComment\',$scriptProperties,\'quipAddComment\');
$loginToCommentTpl = $modx->getOption(\'tplLoginToComment\',$scriptProperties,\'quipLoginToComment\');
$previewTpl = $modx->getOption(\'tplPreview\',$scriptProperties,\'quipPreviewComment\');
$closeAfter = $modx->getOption(\'closeAfter\',$scriptProperties,14);
$requirePreview = $modx->getOption(\'requirePreview\',$scriptProperties,false);
$previewAction = $modx->getOption(\'previewAction\',$scriptProperties,\'quip-preview\');
$postAction = $modx->getOption(\'postAction\',$scriptProperties,\'quip-post\');
$allowedTags = $modx->getOption(\'quip.allowed_tags\',$scriptProperties,\'<br><b><i>\');
$preHooks = $modx->getOption(\'preHooks\',$scriptProperties,\'\');
$postHooks = $modx->getOption(\'postHooks\',$scriptProperties,\'\');
$unsubscribeAction = $modx->getOption(\'unsubscribeAction\',$scriptProperties,\'quip_unsubscribe\');

/* get parent and auth */
$parent = $modx->getOption(\'quip_parent\',$_REQUEST,$modx->getOption(\'parent\',$scriptProperties,0));
$hasAuth = $modx->user->hasSessionContext($modx->context->get(\'key\')) || $modx->getOption(\'debug\',$scriptProperties,false) || empty($requireAuth);
if (!empty($requireUsergroups)) {
    $requireUsergroups = explode(\',\',$requireUsergroups);
    $hasAuth = $modx->user->isMember($requireUsergroups);
}

/* setup default placeholders */
$placeholders = array();
$p = $modx->request->getParameters();
unset($p[\'reported\'],$p[\'quip_approved\']);
$placeholders[\'parent\'] = $parent;
$placeholders[\'thread\'] = $thread->get(\'name\');
$placeholders[\'url\'] = $modx->makeUrl($modx->resource->get(\'id\'),\'\',$p);
$placeholders[\'idprefix\'] = $thread->get(\'idprefix\');

/* handle POST */
$fields = array();
$hasPreview = false;
if (!empty($_POST)) {
    foreach ($_POST as $k => $v) {
        $fields[$k] = str_replace(array(\'[\',\']\'),array(\'&#91;\',\'&#93;\'),$v);
    }
    
    $fields[\'name\'] = strip_tags($fields[\'name\']);
    $fields[\'email\'] = strip_tags($fields[\'email\']);
    $fields[\'website\'] = strip_tags($fields[\'website\']);
    
    /* verify a message was posted */
    if (empty($fields[\'comment\'])) $errors[\'comment\'] = $modx->lexicon(\'quip.message_err_ns\');
    if (empty($fields[\'name\'])) $errors[\'name\'] = $modx->lexicon(\'quip.name_err_ns\');
    if (empty($fields[\'email\'])) $errors[\'email\'] = $modx->lexicon(\'quip.email_err_ns\');
    
    if (!empty($_POST[$postAction]) && empty($errors)) {
        $comment = include_once $quip->config[\'processorsPath\'].\'web/comment/create.php\';
        if (is_object($comment) && $comment instanceof quipComment) {
            $params = $modx->request->getParameters();
            unset($params[$postAction],$params[\'quip_parent\'],$params[\'quip_thread\']);
            $params[\'quip_approved\'] = $comment->get(\'approved\') ? 1 : 0;
            $url = $comment->makeUrl(\'\',$params);

            /* if not approved, remove # and replace with success message #
             * since comment is not yet visible
             */
            if (!$comment->get(\'approved\')) {
                $url = str_replace(\'#\'.$thread->get(\'idprefix\').$comment->get(\'id\'),\'#quip-success-\'.$thread->get(\'idprefix\'),$url);
            }
            $modx->sendRedirect($url);
        } else if (is_array($comment)) {
            $errors = array_merge($errors,$comment);
        }
        $fields[$previewAction] = true;
    }
    /* handle preview */
    else if (!empty($fields[$previewAction]) && empty($errors)) {
        $errors = include_once $quip->config[\'processorsPath\'].\'web/comment/preview.php\';
    }
    if (!empty($errors)) {
        $placeholders[\'error\'] = implode("<br />\\n",$errors);
        foreach ($errors as $k => $v) {
            $placeholders[\'error.\'.$k] = $v;
        }
        $placeholders = array_merge($placeholders,$fields);
    }
}
/* display moderated success message */
if (isset($_GET[\'quip_approved\']) && $_GET[\'quip_approved\'] == 0) {
    $placeholders[\'successMsg\'] = $modx->lexicon(\'quip.comment_will_be_moderated\');
}

/* handle unsubscribing from thread */
if (!empty($_GET[$unsubscribeAction]) && $modx->user->hasSessionContext($modx->context->get(\'key\'))) {
    $profile = $modx->user->getOne(\'Profile\');
    if ($profile) {
        $notify = $modx->getObject(\'quipCommentNotify\',array(
            \'email\' => $profile->get(\'email\'),
            \'thread\' => $thread,
        ));
        if ($notify && $notify->remove()) {
            $placeholders[\'successMsg\'] = $modx->lexicon(\'quip.unsubscribed\');
        }
    }
}

/* if using recaptcha, load recaptcha html if user is not logged in */
$disableRecaptchaWhenLoggedIn = (boolean)$modx->getOption(\'disableRecaptchaWhenLoggedIn\',$scriptProperties,true);
$useRecaptcha = (boolean)$modx->getOption(\'recaptcha\',$scriptProperties,false);
if ($useRecaptcha && !($disableRecaptchaWhenLoggedIn && $hasAuth) && !$hasPreview) {
    $recaptcha = $modx->getService(\'recaptcha\',\'reCaptcha\',$quip->config[\'modelPath\'].\'recaptcha/\');
    if ($recaptcha instanceof reCaptcha) {
        $recaptchaTheme = $modx->getOption(\'recaptchaTheme\',$scriptProperties,\'clean\');
        $html = $recaptcha->getHtml($recaptchaTheme);
        $modx->setPlaceholder(\'quip.recaptcha_html\',$html);
    } else {
        return $modx->lexicon(\'quip.recaptcha_err_load\');
    }
}

/* build reply form */
$replyForm = \'\';

$stillOpen = $thread->checkIfStillOpen($closeAfter) && !$modx->getOption(\'closed\',$scriptProperties,false);
if ($hasAuth && $stillOpen) {
    $phs = array_merge($placeholders,array(
        \'username\' => $modx->user->get(\'username\'),
    ));
    $phs[\'unsubscribe\'] = \'\';

    /* prefill fields */
    $profile = $modx->user->getOne(\'Profile\');
    if ($profile) {
        $phs[\'name\'] = !empty($fields[\'name\']) ? $fields[\'name\'] : $profile->get(\'fullname\');
        $phs[\'email\'] = !empty($fields[\'email\']) ? $fields[\'email\'] : $profile->get(\'email\');
        $phs[\'website\'] = !empty($fields[\'website\']) ? $fields[\'website\'] : $profile->get(\'website\');

        /* allow for unsubscribing for logged-in users */
        if ($modx->user->hasSessionContext($modx->context->get(\'key\'))) {
            $notify = $modx->getObject(\'quipCommentNotify\',array(
                \'email\' => $profile->get(\'email\'),
                \'thread\' => $thread,
            ));
            if ($notify) {
                $phs[\'notifyId\'] = $notify->get(\'id\');
                $phs[\'unsubscribe\'] = $quip->getChunk(\'quipUnsubscribe\',$phs);
                $params = $modx->request->getParameters();
                $params[$unsubscribeAction] = 1;
                $phs[\'unsubscribeUrl\'] = $modx->makeUrl($modx->resource->get(\'id\'),\'\',$params);
            }
        }
    }

    /* if requirePreview == false, auto-can post */
    if (!$requirePreview) {
        $phs[\'can_post\'] = true;
    }
    $phs[\'post_action\'] = $postAction;
    $phs[\'preview_action\'] = $previewAction;
    $phs[\'allowed_tags\'] = $allowedTags;
    $phs[\'notifyChecked\'] = !empty($fields[\'notify\']) ? \' checked="checked"\' : \'\';

    $replyForm = $quip->getChunk($addCommentTpl,$phs);
} else if (!$stillOpen) {
    $replyForm = $modx->lexicon(\'quip.thread_autoclosed\');
} else {
    $replyForm = $quip->getChunk($loginToCommentTpl,$placeholders);
}

/* output or set to placeholder */
$toPlaceholder = $modx->getOption(\'toPlaceholder\',$scriptProperties,false);
if ($toPlaceholder) {
    $modx->setPlaceholder($toPlaceholder,$replyForm);
    return \'\';
}
return $replyForm;',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
        ),
      ),
    ),
    'modTemplateVar' => 
    array (
      'marketingimages' => 
      array (
        'fields' => 
        array (
          'id' => 3,
          'source' => 1,
          'property_preprocess' => false,
          'type' => 'image',
          'name' => 'marketingimages',
          'caption' => 'marketing_image',
          'description' => 'This is the marketing side bar for the blog !!!',
          'editor_type' => 0,
          'category' => 15,
          'locked' => false,
          'elements' => '',
          'rank' => 0,
          'display' => 'image',
          'default_text' => '',
          'properties' => 
          array (
          ),
          'input_properties' => 
          array (
          ),
          'output_properties' => 
          array (
            'alttext' => '',
            'hspace' => '',
            'vspace' => '',
            'borsize' => '',
            'align' => 'none',
            'name' => '',
            'class' => '',
            'id' => '',
            'style' => '',
            'attributes' => '',
          ),
          'static' => false,
          'static_file' => '',
          'content' => '',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
      'tags' => 
      array (
        'fields' => 
        array (
          'id' => 2,
          'source' => 1,
          'property_preprocess' => false,
          'type' => 'text',
          'name' => 'tags',
          'caption' => 'tags',
          'description' => 'Comma delimited tags for the current Resourc',
          'editor_type' => 0,
          'category' => 0,
          'locked' => false,
          'elements' => '',
          'rank' => 0,
          'display' => 'default',
          'default_text' => '',
          'properties' => 
          array (
          ),
          'input_properties' => 
          array (
            'allowBlank' => 'true',
            'maxLength' => '',
            'minLength' => '',
          ),
          'output_properties' => 
          array (
          ),
          'static' => false,
          'static_file' => '',
          'content' => '',
        ),
        'policies' => 
        array (
          'web' => 
          array (
          ),
        ),
        'source' => 
        array (
          'id' => 1,
          'name' => 'Filesystem',
          'description' => '',
          'class_key' => 'sources.modFileMediaSource',
          'properties' => 
          array (
          ),
          'is_stream' => true,
        ),
      ),
    ),
  ),
);